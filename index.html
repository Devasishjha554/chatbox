<!DOCTYPE html>
<html class="dark" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>AI Therapist Chat</title>
    <link href="https://fonts.googleapis.com" rel="preconnect"/>
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#137fec",
                        "background-light": "#f6f7f8",
                        "background-dark": "#101922",
                        "surface-dark": "#1b2733",
                        "surface-hover": "#233648",
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                    borderRadius: {"DEFAULT": "0.5rem", "lg": "1rem", "xl": "1.5rem", "full": "9999px"},
                },
            },
        }
    </script>
    <style>
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #233648; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #344a5e; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .mask-gradient { mask-image: linear-gradient(to right, black 80%, transparent 100%); }
        
        /* Smooth message entry animation */
        @keyframes messageIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-message { animation: messageIn 0.3s ease-out forwards; }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark text-slate-900 dark:text-white font-display overflow-hidden h-screen flex">

<aside class="hidden md:flex flex-col w-72 h-full bg-surface-dark border-r border-surface-hover flex-shrink-0">
    <div class="p-6 flex flex-col h-full justify-between">
        <div class="flex flex-col gap-8">
            <div class="flex gap-3 items-center">
                <div class="bg-center bg-no-repeat bg-cover rounded-full h-12 w-12 border-2 border-surface-hover relative" style='background-image: url("https://api.dicebear.com/7.x/avataaars/svg?seed=Alex");'>
                    <div class="absolute bottom-0 right-0 h-3 w-3 bg-green-500 rounded-full border-2 border-surface-dark"></div>
                </div>
                <div class="flex flex-col">
                    <h1 class="text-white text-base font-semibold leading-tight">Alex Morgan</h1>
                    <p class="text-slate-400 text-xs font-normal">Wellness Plan: Active</p>
                </div>
            </div>
            <nav class="flex flex-col gap-2">
                <a class="flex items-center gap-3 px-4 py-3 rounded-xl bg-primary/10 border border-primary/20 transition-colors" href="#"><span class="material-symbols-outlined text-primary">chat</span><p class="text-white text-sm font-medium">Current Session</p></a>
                <a class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-surface-hover transition-colors text-slate-400 hover:text-white group" href="#"><span class="material-symbols-outlined group-hover:text-white">pie_chart</span><p class="text-sm font-medium">Mood Tracker</p></a>
                <a class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-surface-hover transition-colors text-slate-400 hover:text-white group" href="#"><span class="material-symbols-outlined group-hover:text-white">book</span><p class="text-sm font-medium">Journal</p></a>
            </nav>
        </div>
        <div class="flex flex-col gap-2">
            <a class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-surface-hover transition-colors text-slate-400 hover:text-white group" href="#"><span class="material-symbols-outlined group-hover:text-white">settings</span><p class="text-sm font-medium">Settings</p></a>
        </div>
    </div>
</aside>

<main class="flex flex-col flex-1 h-full min-w-0 bg-background-dark relative">
    <header class="flex items-center justify-between px-6 py-4 border-b border-surface-hover bg-background-dark/80 backdrop-blur-md z-10 sticky top-0">
        <div class="flex items-center gap-4 text-white">
            <div class="h-10 w-10 rounded-full bg-primary/20 flex items-center justify-center text-primary">
                <span class="material-symbols-outlined" style="font-size: 24px;">psychology</span>
            </div>
            <div>
                <h2 class="text-white text-lg font-bold leading-tight flex items-center gap-2">Dr. Aria <span class="px-2 py-0.5 rounded-full bg-green-500/20 text-green-400 text-[10px] font-bold uppercase tracking-wider border border-green-500/20">Online</span></h2>
                <p class="text-slate-400 text-xs font-medium">AI Clinical Therapist • Encrypted</p>
            </div>
        </div>
        <button class="flex items-center justify-center rounded-xl h-10 px-4 bg-surface-hover hover:bg-red-500/20 hover:text-red-400 hover:border-red-500/30 border border-transparent text-slate-300 text-sm font-bold transition-all">End Session</button>
    </header>

    <div id="chatMessages" class="flex-1 overflow-y-auto p-4 sm:p-6 md:p-10 flex flex-col gap-6">
        <div class="flex justify-center py-4">
            <span class="px-3 py-1 bg-surface-hover rounded-full text-xs text-slate-400 font-medium">Today, 2:30 PM</span>
        </div>
        
        <div class="flex items-end gap-3 max-w-3xl">
            <div class="h-10 w-10 rounded-full bg-surface-hover flex items-center justify-center border border-white/10 shadow-sm">
                 <span class="material-symbols-outlined text-primary" style="font-size: 20px;">psychology</span>
            </div>
            <div class="flex flex-col gap-1 items-start">
                <p class="text-slate-400 text-xs font-medium ml-1">Dr. Aria</p>
                <div class="p-4 rounded-2xl rounded-tl-none bg-surface-hover text-slate-100 text-base border border-white/5">
                    Hello Alex. I'm here to listen. How are you feeling right now?
                </div>
            </div>
        </div>
    </div>

    <div class="p-4 sm:p-6 pt-2 bg-gradient-to-t from-background-dark via-background-dark to-transparent z-20">
        <div class="flex gap-3 pb-4 overflow-x-auto no-scrollbar mask-gradient">
            <button class="chip flex items-center gap-2 px-3 py-2 rounded-xl bg-surface-hover border border-white/5 hover:border-primary/50 transition-all shrink-0">
                <span class="material-symbols-outlined text-indigo-400 text-xl">cloud</span>
                <span class="text-sm text-slate-300 font-medium">I'm feeling anxious</span>
            </button>
            <button class="chip flex items-center gap-2 px-3 py-2 rounded-xl bg-surface-hover border border-white/5 hover:border-primary/50 transition-all shrink-0">
                <span class="material-symbols-outlined text-amber-400 text-xl">bedtime</span>
                <span class="text-sm text-slate-300 font-medium">I had bad sleep</span>
            </button>
            <button class="chip flex items-center gap-2 px-3 py-2 rounded-xl bg-surface-hover border border-white/5 hover:border-primary/50 transition-all shrink-0">
                <span class="material-symbols-outlined text-rose-400 text-xl">waves</span>
                <span class="text-sm text-slate-300 font-medium">Feeling overwhelmed</span>
            </button>
        </div>

        <div class="relative w-full max-w-4xl mx-auto">
            <div class="flex items-end w-full bg-surface-hover rounded-2xl border border-white/5 focus-within:border-primary/50 focus-within:ring-1 focus-within:ring-primary/50 transition-all shadow-lg">
                <textarea id="chatInput" class="w-full bg-transparent border-0 text-white placeholder-slate-400 focus:ring-0 resize-none py-4 pl-5 pr-14 h-16 max-h-32" placeholder="Type whatever is on your mind..."></textarea>
                <div class="flex items-center gap-2 p-2 pr-3">
                    <button id="sendBtn" class="h-10 px-6 bg-primary hover:bg-blue-600 text-white text-sm font-semibold rounded-xl transition-colors shadow-lg shadow-primary/20">Send</button>
                </div>
            </div>
            <p class="text-center text-slate-500 text-[11px] mt-3">Dr. Aria is an AI assistant and can make mistakes. Always consult a professional for urgent needs.</p>
        </div>
    </div>
</main>

<script>
const input = document.getElementById("chatInput");
const sendBtn = document.getElementById("sendBtn");
const messages = document.getElementById("chatMessages");

// --- MEANINGFUL RESPONSE LOGIC ---
const getAriaResponse = (userText) => {
    const text = userText.toLowerCase();
    
    if (text.includes("anxious") || text.includes("anxiety")) {
        return "Anxiety can feel like an uninvited guest. When you feel it rising, where do you notice it most in your body—your chest, your stomach, or perhaps your shoulders?";
    }
    if (text.includes("overwhelmed") || text.includes("piling up") || text.includes("work")) {
        return "It sounds like you're carrying a lot right now. When the 'to-do' list gets this loud, it's hard to hear anything else. If we were to pick just one small thing to set aside for today, what would it be?";
    }
    if (text.includes("sleep") || text.includes("tired")) {
        return "Sleep is often the first thing to suffer when our minds are busy. Have you found it hard to fall asleep because of racing thoughts, or is it more about staying asleep?";
    }
    if (text.includes("thank") || text.includes("thanks")) {
        return "You're very welcome. I'm glad we can explore these things together. Is there anything else on your mind?";
    }
    
    return "I hear you, Alex. That sounds like a significant thing to navigate. Could you tell me more about how that has been affecting your energy levels lately?";
};

// --- CORE FUNCTIONS ---
function scrollBottom() {
    messages.scrollTo({ top: messages.scrollHeight, behavior: 'smooth' });
}

function showTypingIndicator() {
    const div = document.createElement("div");
    div.id = "typing-indicator";
    div.className = "flex items-end gap-3 max-w-3xl animate-message";
    div.innerHTML = `
        <div class="h-10 w-10 rounded-full bg-surface-hover flex items-center justify-center border border-white/10 shadow-sm">
             <span class="material-symbols-outlined text-primary animate-pulse" style="font-size: 20px;">psychology</span>
        </div>
        <div class="p-4 rounded-2xl rounded-tl-none bg-surface-hover text-slate-400 italic text-sm border border-white/5">
            Dr. Aria is thinking...
        </div>
    `;
    messages.appendChild(div);
    scrollBottom();
}

function addUserMessage(text) {
    const msg = document.createElement("div");
    msg.className = "flex items-end gap-3 max-w-3xl self-end flex-row-reverse animate-message";
    msg.innerHTML = `
        <div class="h-10 w-10 rounded-full bg-primary flex items-center justify-center border border-primary/30 shadow-sm">
            <span class="text-white text-xs font-bold">AM</span>
        </div>
        <div class="flex flex-col gap-1 items-end">
            <p class="text-slate-400 text-xs font-medium mr-1">You</p>
            <div class="p-4 rounded-2xl rounded-tr-none bg-primary text-white text-base shadow-md">
                ${text}
            </div>
        </div>
    `;
    messages.appendChild(msg);
    scrollBottom();
}

function addAIMessage(text) {
    const msg = document.createElement("div");
    msg.className = "flex items-end gap-3 max-w-3xl animate-message";
    msg.innerHTML = `
        <div class="h-10 w-10 rounded-full bg-surface-hover flex items-center justify-center border border-white/10 shadow-sm">
             <span class="material-symbols-outlined text-primary" style="font-size: 20px;">psychology</span>
        </div>
        <div class="flex flex-col gap-1 items-start">
            <p class="text-slate-400 text-xs font-medium ml-1">Dr. Aria</p>
            <div class="p-4 rounded-2xl rounded-tl-none bg-surface-hover text-slate-100 border border-white/5 leading-relaxed">
                ${text}
            </div>
        </div>
    `;
    messages.appendChild(msg);
    scrollBottom();
}

async function handleSendMessage(explicitText = null) {
    const text = explicitText || input.value.trim();
    if (!text) return;

    // User message
    addUserMessage(text);
    if (!explicitText) {
        input.value = "";
        input.style.height = "64px";
    }

    // AI thinking delay
    showTypingIndicator();
    
    setTimeout(() => {
        const indicator = document.getElementById("typing-indicator");
        if (indicator) indicator.remove();
        
        const response = getAriaResponse(text);
        addAIMessage(response);
    }, 1500); // 1.5 second delay for realism
}

// --- EVENT LISTENERS ---
sendBtn.addEventListener("click", () => handleSendMessage());

input.addEventListener("keydown", (e) => {
    if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        handleSendMessage();
    }
});

input.addEventListener("input", () => {
    input.style.height = "auto";
    input.style.height = input.scrollHeight + "px";
});

// Make chips clickable
document.querySelectorAll('.chip').forEach(chip => {
    chip.addEventListener('click', () => {
        const text = chip.querySelector('span:last-child').innerText;
        handleSendMessage(text);
    });
});
</script>

</body>
</html>